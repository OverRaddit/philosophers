## 어떻게 구현할까

## 프로젝트에 대한 생각

핵심은 최대한 많은사람이 쉬지않고 밥을 먹어야 한다.
밥을 먹으려면 양쪽의 포크를 집어야 하므로.
밥을 먹는 그룹을 홀수그룹과 짝수그룹으로 나눠서 각 그룹별로 식사시간을 가져야 할 것 같다.
한 그룹이 밥을 먹는 동안 다른 그룹은 대기하거나 잠자기, 생각하기를 해야한다.

각 그룹별 라이프 사이클은 다음과 같다.

(필요하다면 usleep대기) -> 먹기 -> 잠자기 -> 생각하기
					  이후 이 3단계 무한루프!

참고로 전체 인원이 홀수라면 3그룹으로 나누어 져야 한다.
일단 구현의 용이함을 위해 전체인원이 짝수라고 가정하고 풀어본 다음,
홀수 케이스도 받아들이는 것으로 확장하여 구현할 계획이다.

## 전체 인원이 홀수일때...

짝수일때는 2개의 그룹이 서로 돌아가면서 자원을 차지하므로 공평하게 밥을 먹일 수 있다.

그러나 홀수일때는 3개의 그룹이 생긴다.
문제는 A->B->C그룹으로 먹으면 좋지만.
한 그룹이 식사를 마친후 정해진 순서가 아닌 다른 그룹이 식사를 시작할 수 있다.
2개의 대기중이던 그룹중 어느 그룹이 식사할지 모른다는 말이다.

현재 생각한 아이디어는 3개의 그룹별 권한을 만드는 것이다.

1. 무권한
2. 서브권한 -> 주권한을 획득할 수 있다.
3. 주권한 -> 일을 시킬 수 있다.

이렇게 각 그룹에게 3개의 권한을 순차적으로 부여함으로써
공평하게 돌아가면서 밥을 먹일 수 있을 것 같다.

=========

포크와 뮤텍스를 분리함.

포크의 초기값을 -1로 저장하고 싶음. memset류의 함수를 립엪티에서 가져와야함.
think가 언제 출력되어야 할지 모르겠다.

현재 테이블에서 한번에 한명의 철학자만 밥을 먹을 수 있다.
밥을 먹는 권한이 개인으로 한정됨.

각 포크당 뮤텍스를 만들어놓고, 해당 뮤텍스를 통해서만 해당 포크에 접근할 수 있게 만들 순 없나?
뮤텍스로 잠글 수 있는 범위를 설정하고 싶다.
현재 뮤텍스의 기능은 쓰레드의 전역변수 접근/막기 중 하나만 가능한데,
나는 특정변수(i번째 포크의 상태)만 접근시키게 하고 싶다.

쓰레드가 죽는 정확한 타이밍을 해당 쓰레드 내부에서 처리할 수 없다.
모니터링쓰레드를 만들어서 죽은 쓰레드가 발생하였는지 여부를 무한루프를 돌며 확인시키도록 하자.