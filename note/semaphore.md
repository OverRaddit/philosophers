Semaphore(세마포어)

운영 체계 또는 프로그램 작성 내에서 공유 자원에 대한 접속을 제어하기 위해 사용되는 신호.

병행 내지 병렬로 동작되는 둘 이상의 프로세서 사이에서 마이크로프로세서 시간이나

입출력 접속구와 같은 공유 자원을 동시에 사용할 수 없기 때문에,
한 프로세서가 사용하고 있는 동안에 세마포어를 세워서 다른 프로세서를 대기시키고
사용이 끝나면 해제시키는 방법으로 사용한다.

## 세마포어 함수 사용법


[사용금지]sem_init(sem_t *sem, int pshared, unsigned int value);
첫번째 인자 :: 세마포어 객체를 초기화 할 세마포어를 받는다. (위의 sem_t semaphore가 여기 해당된다.)
두번째 인자 :: 여기에 0을 주지 않을경우 sem_init는 항상 ENOSYS 에러코드를 반환한다.(0을 쓰도록 한다.)
세번째 인자 :: 세마포어를 몇으로 초기화 할지 의미한다.(화장실 열쇠를 몇개로 시작할지 의미)

sem_t *sem_open(const char *name, int oflag, ...);

sem_wait(sem_t *sem);
세마포어의 P역할을 한다.
즉, 세마포어를 하나 감소시키는 역할을 하고 세마포어가 0일 경우에는 1이상이 될 때까지 스레드는 대기 상태에 있는다.
0이 아닐 경우에는 대기상태에서 빠져나와 세마포어를 또 1 감소시킨다.

sem_post(sem_t *sem);
세마포어의 V역할을 한다.
세마포어 값을 1 증가 시킨다.

[사용금지]sem_destroy(sem_t *sem);
세마포어와 관련된 리소스들을 소멸시킨다. (객체 소멸)

int sem_close(sem_t *sem);
세마포어를 종료한다.

int sem_unlink(const char *name);
세마포어를 제거한다.



## [좀비 프로세스와 고아 프로세스]
https://codetravel.tistory.com/31

부모가 자식보다 먼저 종료되면 자식프로세스는 고아프로세스가 됨.
자식프로세스가 종료되었지만 부모프로세스가 자식 프로세스의 종료 상태를 회수하지 않으면 자식을 좀비프로세스라고함.

종료된 프로세스가 생기면 커널에서 해당 프로세스의 자식 프로세스를 확인하고
자식프로세스의 부모프로세스id를 1로 바꿔준다.

고아프로세스가 작업을 종료하면 init프로세스가 wait함수를 호출하여 고아 프로세스의 종료상태를
회수함으로써 좀비 프로세스가 되는 것을 방지합니다.
